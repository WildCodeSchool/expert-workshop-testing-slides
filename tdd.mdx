import {CodeSurfer,CodeSurferColumns,Step} from "code-surfer";
import { github, vsDark } from "@code-surfer/themes";
export const theme = vsDark;
const boldStyle = {"color": "orange"};
const paragraphStyle = { 
    "text-align": "justify", 
    "width": "50%", 
    "margin": "auto", 
    "font-size": "2rem", 
    "line-height": "2.5rem"
};

# Apprendre le TDD üëã

---

## C'est quoi le TDD ? 

---

<div style={paragraphStyle}>
    <p>
    C'est l'art d'√©crire son code <strong style={boldStyle}>de fa√ßon incr√©mentale</strong> en 
    √©tant pilot√© par les tests. Ainsi on reste <strong style={boldStyle}>en permanence proche des probl√©matiques 
    m√©tiers.</strong>
    </p>
</div>

---

Prenons le probl√®me classique du "fizzbuzz"

---

<CodeSurfer>

```ts file=./src/tdd/fizzbuzz.problem.ts title="Le fizzbuzz" subtitle="Premi√®rement, exposons le probl√®me"
```

</CodeSurfer>

---

<div style={paragraphStyle}>
    <p>
    On peut constater que le probl√®me du fizzbuzz peut se r√©soudre assez facilement.
    En effet, <strong style={boldStyle}>le nombre de cas utilisateurs diff√©rents est assez limit√©.</strong>
    C'est donc un parfait premier exercice pour √©crire nos premiers tests.
    </p>
</div>

---

<div style={paragraphStyle}>
    <p>
    Il est  possible d'√©crire tous nos tests √† la main, mais il existe <strong style={boldStyle}>des outils d√©di√©s</strong>.
    Notre choix va se porter sur ... 
    </p>
</div>

---

[Le framework Jest](https://jestjs.io/fr/)

---

Jest est un framework de test JavaScript de qualit√© qui met l'accent sur la simplicit√©.

---

<CodeSurfer>

```bash title="Installer jest" subtitle="installer jest avec npm"
# Pour installer jest avec npm, tapez la commande suivante:
npm install --save-dev jest
```

```bash title="Configurer jest" subtitle="initialiser jest"
# Pour installer jest avec npm, tapez la commande suivante:
npm install --save-dev jest

# Pour configurer jest, tapez la commande suivante: 
jest --init

# La configuration par d√©faut devrait convenir.
```

```json title="Utiliser jest" subtitle="configurer le package.json"
{
  "private": true,
  ...
  "scripts": {
    ...
    "test": "jest"
  }
}

```

</CodeSurfer>

---

<div style={paragraphStyle}>
    <p>
    √Ä partir de maintenant nous allons √©crire notre suite de tests.
    Nous proc√©derons √©tape par √©tape, et r√©pondrons √† chaque cas utilisateur
    De la fa√ßon la plus simple qui soit.
    </p>
</div>

---

<div style={paragraphStyle}>
    <p>
    En TDD, <strong style={boldStyle}>les erreurs de compilation comptent, </strong> on les range dans la cat√©gorie des 
    <strong style={boldStyle}> tests statiques.</strong> Un test statique est un test qui peut √™tre r√©solu 
    <strong style={boldStyle}>sans d√©marrer le code.</strong> Cela peut comprendre les erreurs de syntaxe, de compilation, d'imports etc. Ici, notre fonction fizzbuzz, <strong style={boldStyle}>n'existe pas encore</strong>, nous devons donc r√©soudre ce soucis. 
    </p>
</div>

---

<CodeSurfer>

```ts file=./src/tdd/fizzbuzz1.spec.ts title="On doit pouvoir utiliser la fonction" subtitle="Premier test"
```

```ts file=./src/tdd/fizzbuzz.solution1.ts title="On doit pouvoir utiliser la fonction" subtitle="Le code minimum"
```

</CodeSurfer>

---

Et voil√†, nous avons cr√©e notre premier test et nous l'avons pass√© avec succ√®s !

---

Maintenant, continuons comme cela jusqu'√† ce que l'on ait couvert tous les uses cases.

---

<CodeSurfer>

```ts file=./src/tdd/fizzbuzz2.spec.ts title="On doit pouvoir utiliser la fonction" subtitle="2√®me test"
```

```ts file=./src/tdd/fizzbuzz.solution2.ts title="On doit pouvoir utiliser la fonction" subtitle="Le code minimum"
```

```ts file=./src/tdd/fizzbuzz3.spec.ts title="On doit pouvoir utiliser la fonction" subtitle="3√®me test"
```

```ts file=./src/tdd/fizzbuzz.solution3.ts title="On doit pouvoir utiliser la fonction" subtitle="Le code minimum"
```

```ts file=./src/tdd/fizzbuzz4.spec.ts title="On doit pouvoir utiliser la fonction" subtitle="4√®me test"
```

```ts file=./src/tdd/fizzbuzz.solution4.ts title="On doit pouvoir utiliser la fonction" subtitle="Le code minimum"
```

```ts file=./src/tdd/fizzbuzz5.spec.ts title="On doit pouvoir utiliser la fonction" subtitle="5√®me test"
```

```ts file=./src/tdd/fizzbuzz.solution5.ts title="On doit pouvoir utiliser la fonction" subtitle="Le code minimum"
```

</CodeSurfer>

---

<div style={paragraphStyle}>
    <p>
        Tu noteras que les tests, tels qu'ils ont √©t√© cod√©s, sont tr√®s <strong style={boldStyle}>na√Øfs</strong>.
        On d√©crit seulement quelques cas utilisateurs, et on ignore volontiers ceux qui pourraient nous g√™ner 
        de prime abord. Tu pourrais simplifier et am√©liorer ces tests, d'ailleurs, c'est le sujet de ton premier TP =), have fun !
    </p>
</div>

---

# √Ä toi de jouer !

Cr√©e un test moins na√Øf de fizzbuzz pour tous les nombres de 0 √† 100.
